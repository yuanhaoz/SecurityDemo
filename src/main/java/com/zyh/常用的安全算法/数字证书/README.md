# 常用的安全算法

常用的安全算法主要包括摘要算法、对称加密算法、非对称加密算法、信息编码等。

## 数字证书

数字证书（Digital Certificate）也称为电子证书，类似于日常生活中的身份证，也是另外一种形式的身份认证，用于标识网络中的用户身份。数字证书集合了多种密码学的加密算法，证书自身带有公钥信息，可以完成相应的加密、解密操作，同时，还拥有自身信息的数字签名，可以鉴别证书的颁发机构，以及证书内容的完整性。由于证书本身含有用户的认证信息，因此可以作为用户身份识别的依据。

通常数字证书包含如下内容：

- 对象的名称（人、服务器、组织）；
- 证书的过期时间；
- 证书的颁发机构（谁为证书担保）；
- 证书颁发机构对证书信息的数字签名；
- 签名算法；
- 对象的公钥。

#### 1. X.509

不同的数字证书所包含的内容信息和格式可能不尽相同，因此，需要有一种格式标准来规范数字证书的存储和校验。大多数的数字证书都以一种标准的格式（即X.509）来存储它们的信息。X.509提供了一种标准的方式，将证书信息规范地存储到一系列可解析的字段当中，X.509 V3 是 X.509 标准目前使用最为广泛的版本。下表介绍了X.509证书中所包含的字段信息。

![Image text](https://github.com/yuanhaoz/SecurityDemo/blob/develop/src/main/java/com/zyh/常用的安全算法/数字证书/x509.png)

#### 2. 证书颁发

在现实生活中，我们的身份证件需要由相应的政府机关进行签发，而网络用户的数字证书则需要数字证书认证机构（Certificate Authority, CA）来进行颁发，只有经过CA颁发的数字证书在网络中才具备可认证性。

数字证书的签发过程实际上就是对数字证书的内容，包括证书所代表对象的公钥进行数字签名，而验证证书的过程，实际上是校验证书的数字签名，包含了对证书有效期的验证。证书签名的生成如下图所示。

![Image text](https://github.com/yuanhaoz/SecurityDemo/blob/develop/src/main/java/com/zyh/常用的安全算法/数字证书/CAgenerate.png)

VeriSign、GeoTrust 和 Thankwte 是公认的国际权威数字证书认证机构的“三巨头”，其中使用最为广泛的为VeriSign签发的电子商务用数字证书。

#### 3. 证书校验

客户端收到数字证书时，首先会检查证书的认证机构，如果该机构是权威的证书认证机构，则通过该权威认证机构的根证书获得证书颁发者的公钥，通过该公钥，对证书的数字签名进行校验，如下图所示，并验证证书的有效时间是否过期。根证书是证书认证机构给自己颁发的数字证书，是证书信任链的起始点，安装根证书则意味着对这个证书认证机构的信任。

![Image text](https://github.com/yuanhaoz/SecurityDemo/blob/develop/src/main/java/com/zyh/常用的安全算法/数字证书/CAverify.png)

证书主要包含用户的信息、用户的公钥和证书机构对该证书信息的数字签名。要验证一份证书的真伪（即验证证书机构对该证书信息的签名是否有效），需要用证书认证机构的公钥来验证，而证书认证机构的公钥存在于对这份证书进行签名的上一级用户的数字证书内，但使用该证书验证又需先验证该证书本身的真伪，故又要用签发该证书的证书来验证，这样一来就构成一条证书链的关系。这条证书链在哪里终结呢？答案就是根证书。根证书是一份特殊的证书，它的签发者是它本身，下载安装根证书就表明对该根证书及其所签发的证书都表示信任，而在技术上则是建立起一个验证证书信息的链条，证书的验证追溯至根证书即结束。所以用户在使用数字证书之前必须先安装颁发该证书的根证书。

大多数操作系统都会预先安装一些较为权威的证书认证机构的根证书，如 VeriSign、GeoTrust等。